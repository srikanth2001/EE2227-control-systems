\begin{enumerate}[label=\thesection.\arabic*.,ref=\thesection.\theenumi]
\numberwithin{equation}{enumi}

\item
\label{Question_1_ee18btech11023}
The feedback current amplifier in fig.\ref{fig:Original ckt1} can
be thought of as a “super” CG transistor. Note that rather than
connecting the gate of $Q_2$ to signal ground, an amplifier is
placed between source and gate.
\begin{figure}[!ht]
	\begin{center}
			\resizebox{\columnwidth}{!}{\input{./figs/EE18BTECH11023/ee18btech11023_ckt1}}
	\end{center}
\caption{}
\label{fig:Original ckt1}
\end{figure}
\\for the fig.\ref{fig:Original ckt1} , the parameter's  table is\;\;\;\;\; TABLE.\ref{table:ee18btech11023_1}
\begin{table}[]
    \centering
  	\resizebox{\columnwidth}{!}{\input{./tables/EE18BTECH11023/ee18btech11023_table1}}
    \caption{}
    \label{table:ee18btech11023_1}
\end{table}

\item 
\label{Question_1a_ee18btech11023}
(a) If $\mu$ is very large, what is the signal voltage at the input
terminal?What is the input resistance?What is the current
gain Io/Is ?\\
\\
\solution \\
Refer to the fig. \ref{fig:Original ckt1} for the feedback current amplifier circuit, in this super common gate transistor is connected between the gate and source terminals of the MOSFET.\\
Replace the op-amp with its equivalent modal and replace the MOSFET with its small signal equivalent circuit.\\
with reference to the fig,\ref{fig:small ckt1}. For ideal op-amp,the input resistance($R_{id}$) is very high (infinite) . And the drain current is approximately equal to source current
\begin{align}
    I_{D} \cong  I_{S}
\label{eq_ee18btech11023_1}
\end{align}
The closed loop gain of op-amp is
\begin{align}
    T = \frac{\mu}{1 + \mu H}
    \label{eq_ee18btech11023_2}
\end{align}
for larger value of closed loop gain , open loop gain '$\mu$' will be large. 
from fig.\ref{fig:small ckt1} we can observe that input voltage is,
\begin{align}
    V_{in} = -R_sI_s
    \label{eq_ee18btech11023_3}
\end{align}
Since the drain current is approximately is equal to source current, And the current flowing through resistor $R_S$ is $I_s$ since there is no current flowing through the negative terminal of  op-amp. Therefore, it is connected that the output current $I_O$ is flowing through the resister $R_s$, then
\begin{align}
    I_o = I_S
    \label{eq_ee18btech11023_4}
\end{align}
\begin{align*}
    \frac{I_o}{I_s} \equiv 1 
\end{align*}
therefore the current gain is,
\begin{align}
    \frac{I_o}{I_s} = 1 \; A/A
    \label{eq_ee18btech11023_5}
\end{align}
and from fig.\ref{fig:small ckt1} the input Resistance is equal to $R_{id}$
\begin{align}
    R_{i} = R_{id}
    \label{eq_ee18btech11023_6}
\end{align}

\item
\label{Question_1b_ee18btech11023}
(b) For finite $\mu$ but assuming that the input resistance of the
amplifier g is very large, find the 'G' circuit and derive
expressions for G, $Ri$, and $R_o$.?
\\
\solution\\
For the finite value of $\mu$ and the input resistance of a ideal op-amp is very high(infinite).
the open loop amplifier circuit ('G' circuit ) fig.\ref{fig:small ckt1}
\begin{figure}[!ht]
	\begin{center}
			\resizebox{\columnwidth}{!}{\input{./figs/EE18BTECH11023/ee18btech11023_ckt3}}
	\end{center}
\caption{}
\label{fig:small ckt1}
\end{figure}

For a ideal op-amp the output Resistance is very small, so we can neglect the resistance $r_o$.  from fig\ref{fig:small ckt1}
\begin{align}
    V_{id} = I_sR_s
    \label{eq_ee18btech11023_7}
\end{align}
current through resistance $R_s$ is
\begin{align*}
    since\;\;I_o \equiv I_s
\end{align*}
\begin{align}
    I_o = \frac{\mu V_{id}}{\frac{1}{g_m}} 
    \label{eq_ee18btech11023_8}
\end{align}
\begin{align}
    I_o = \mu g_m I_s R_S
    \label{eq_ee18btech11023_9}
\end{align}
Expression for current gain G is:
\begin{align}
    \frac{I_o}{I_s} = \mu g_m R_s
    \label{eq_ee18btech11023_10}
\end{align}
\begin{align}
    G = \mu g_m R_s
    \label{eq_ee18btech11023_11}
\end{align}
from the fig.\ref{fig:small ckt1}
\begin{align*}
    since \;\; R_{id} = \infty
\end{align*}
the input resistance:
\begin{align}
    R_I = R_s
    \label{eq_ee18btech11023_12}
\end{align}
the output Resistance:
\begin{align}
    R_o = r_o
    \label{eq_ee18btech11023_13}
\end{align}

\item
\label{Question_1c_ee18btech11023}
(c) What is the value of H?
\\
\solution\\
closed loop gain of the op-amp is:
\begin{align}
    T = \frac{\mu}{1 + \mu H}
    \label{eq_ee18btech11023_14}
\end{align}
\begin{align*}
    since \;\; \mu H >> 1
\end{align*}
then 
\begin{align}
    T = \frac{\mu}{\mu H}
    \label{eq_ee18btech11023_15}
\end{align}
for the larger value of $\mu$
\begin{align*}
   T \implies 1 
\end{align*}

the value of 'H' will be:
\begin{align}
    H = 1
    \label{eq_ee18btech11023_16}
\end{align}
\item
\label{Question_1d_ee18btech11023}
(d) Find GH and T . If $\mu$ is large, what is the value of T ?\\
\solution\\
from eq.\ref{eq_ee18btech11023_10} and from eq.\ref{eq_ee18btech11023_16}
\begin{align*}
    G = \mu g_m R_s\;\; ,  \;\;\; H = 1
\end{align*}
value of GH:
\begin{align}
    GH = \mu g_m R_s
     \label{eq_ee18btech11023_17}
\end{align}
closed loop gain of op-amp is:
\begin{align}
    T = \frac{G}{1+GH}
     \label{eq_ee18btech11023_18}
\end{align}
substitute values of G and GH in eq.\ref{eq_ee18btech11023_18}
\begin{align}
    T = \frac{\mu g_m R_s}{1+\mu g_m R_s}
    \label{eq_ee18btech11023_19}
\end{align}
for the larger valve of $\mu$
\begin{align}
    T \implies 1
    \label{eq_ee18btech11023_20}
\end{align}

\item
\label{Question_1e_ee18btech11023}
(e) Find $R_{in}$ and $R_{out}$ assuming the loop gain is large\\
\solution\\
\textbf{for a Feedback Amplifier }
\begin{align}
    R_{if} = \frac{R_{i}}{1+GH}
    \label{eq_ee18btech11023_21}
\end{align}
Here,
    $R_{i}$ =  $R_{s}$\\
substituting the values of GH and $R_{i}$ in eq.\ref{eq_ee18btech11023_21}\;\;\; we get:
\begin{align}
    R_{if} = \frac{R_s}{1+\mu g_m R_s}
    \label{eq_ee18btech11023_22}
\end{align}
dividing the eq.\ref{eq_ee18btech11023_22} with $R_s$
\begin{align}
    R_{if} = \frac{1}{\frac{1}{R_s} + \mu g_m}
    \label{eq_ee18btech11023_23}
\end{align}
the eq.\ref{eq_ee18btech11023_23} can also written like
\begin{align}
    R_{in} = R_{s} \parallel  \frac{1}{\mu g_m}
    \label{eq_ee18btech11023_24}
\end{align}
\begin{align}
    R_{if} = R_s \parallel R_{in}
    \label{eq_ee18btech11023_25}
\end{align}
 from the equations \ref{eq_ee18btech11023_24} and \ref{eq_ee18btech11023_25} $R_{in}$ ca be written as:

\begin{align}
    R_{in} = \frac{1}{\mu g_m}
    \label{eq_ee18btech11023_26}
\end{align}
for the lager value of $\mu$ then $R_{}$ will be small
\begin{align*}
    for\;\;\; \mu \implies \infty
\end{align*}
then $R_{in}$ becomes:
\begin{align}
    R_{in} = 0
    \label{eq_ee18btech11023_27}
\end{align}
\textbf{for a Feedback Amplifier output Resistance is: }
\begin{align}
    R_{out} = (1 + GH)R_o
    \label{eq_ee18btech11023_28}
\end{align}
From the figure Fig.\ref{fig:small ckt1} 
\begin{align}
    R_o = \frac{1}{g_m}
    \label{eq_ee18btech11023_29}
\end{align}
substitute the values of GH and $R_o$ in eq.\ref{eq_ee18btech11023_28}\\
we get:
\begin{align}
    R_{out} = (1+ \mu g_m R_s)\frac{1}{g_m}
    \label{eq_ee18btech11023_30}
\end{align}
\begin{align}
    R_{out} = \frac{1}{g_m} + \mu R_s
    \label{eq_ee18btech11023_31}
\end{align}
By observing the eq.\ref{eq_ee18btech11023_31} , for the lager value for $\mu$ we will have larger value for $R_{out}$
\begin{align*}
    \mu \implies \infty
\end{align*}
\begin{align}
    R_{out} \implies \infty
    \label{eq_ee18btech11023_32}
\end{align}
\item
\label{Question_2f_ee18btech11023}
(f) The “super” CG transistor can be utilized in the cascode
configuration shown in Fig.\ref{fig:Original ckt2}, where $V_G$ is a dc
bias voltage. Replacing Q1 by its small-signal model, use
the analogy of the resulting circuit to that in Fig.\ref{fig:Original ckt1}
to find Io and Rout.

\textbf{\begin{figure}[!ht]
	\begin{center}
			\resizebox{\columnwidth}{!}{\input{./figs/EE18BTECH11023/ee18btech11023_ckt2}}
	\end{center}
\caption{}
\label{fig:Original ckt2}
\end{figure}}
\\parameter table for fig.\ref{fig:Original ckt2}  is
TABLE.\ref{table:ee18btech11023_2}
\begin{table}[]
    \centering
  	\resizebox{\columnwidth}{!}{\input{./tables/EE18BTECH11023/ee18btech11023_table2}}
    \caption{}
    \label{table:ee18btech11023_2}
\end{table}
\item
\solution\\
Refer to the fig.\ref{fig:Original ckt2} for the cascode configuration in which the super CG transistor is used.  the small signal equivalent circuit is shown in 
fig.\ref{fig:small ckt2},

\begin{figure}[!ht]
	\begin{center}
			\resizebox{\columnwidth}{!}{\input{./figs/EE18BTECH11023/ee18btech11023_ckt4}}
	\end{center}
\caption{}
\label{fig:small ckt2}
\end{figure}

from the fig.\ref{fig:small ckt2} clearly observed that the current $I_s$
\begin{align}
    I_s = g_{m1} V_{gs}
    \label{eq_ee18btech11023_33}
\end{align}
the voltage $V_i$ is applied at the gate terminal of the transistor $Q_1$ ,
therefore the gate source voltage becomes $V_i$\;:
\begin{align}
    V_i = V_{gs}
    \label{eq_ee18btech11023_34}
\end{align}

form the eq.\ref{eq_ee18btech11023_34} and eq.\ref{eq_ee18btech11023_33}
\begin{align}
    I_s = g_{m1} V_i
    \label{eq_ee18btech11023_35}
\end{align}
the closed loop gain of the op-amp is:
\begin{align}
    T = \frac{G}{1 + GH}
    \label{eq_ee18btech11023_36}
\end{align}
from the questions  Q.\ref{Question_1b_ee18btech11023} and Q.\ref{Question_1c_ee18btech11023}
 we will get:
\begin{align}
    G = \mu g_{m2}R_s
    \label{eq_ee18btech11023_37}
\end{align}
\begin{align}
    H \implies 1
    \label{eq_ee18btech11023_38}
\end{align}
substitute the values of H and G in eq.\ref{eq_ee18btech11023_36}
\begin{align}
    T = \frac{\mu g_{m2}R_s}{1 + \mu g_{m2}R_s}
    \label{eq_ee18btech11023_39}
\end{align}
\begin{align*}
    since \;\;\;  T = \frac{I_o}{I_s}
\end{align*}

\begin{align}
    \frac{I_o}I_s{}  = \frac{\mu g_{m2}R_s}{1 + \mu g_{m2}R_s}
    \label{eq_ee18btech11023_40}
\end{align}
\begin{align}
    I_o = I_s\sbrak{\frac{\mu g_{m2}R_s}{1 + \mu g_{m2}R_s}}
      \label{eq_ee18btech11023_41}
\end{align}
from eq.\ref{eq_ee18btech11023_35} substitute the value of $I_s$ in eq.\ref{eq_ee18btech11023_41}

\begin{align}
    I_o =  g_{m1} V_i\sbrak{\frac{\mu g_{m2}R_s}{1 + \mu g_{m2}R_s}}
    \label{eq_ee18btech11023_42}
\end{align}
\begin{align*}
    since\;\; \mu g_{m2}R_s >> 1
\end{align*}
\begin{align}
    I_o =  g_{m1} V_i\sbrak{\frac{\mu g_{m2}R_s}{ \mu g_{m2}R_s}}
    \label{eq_ee18btech11023_43}
\end{align}
\begin{align}
    I_o =  g_{m1} V_i
     \label{eq_ee18btech11023_44}
\end{align}
the expression for the output current is:
\begin{align}
    I_o =  g_{m1} V_i
     \label{eq_ee18btech11023_45}
\end{align}

the output amplifier is:
\begin{align}
    R_{out} = (1 + GH)R_o
    \label{eq_ee18btech11023_46}
\end{align}
from the question  Q.\ref{Question_1d_ee18btech11023} we will get:
\begin{align}
    GH = \mu g_{m2}R_s
    \label{eq_ee18btech11023_47}
\end{align}
\begin{align}
    R_{out} = (1 + \mu g_{m2}R_s)R_o
    \label{eq_ee18btech11023_48}
\end{align}

\begin{align}
    R_{out} \equiv \mu g_{m2}R_s R_o
     \label{eq_ee18btech11023_49}
\end{align}
therefore the expression for output resistance is :
\begin{align}
    R_{out} = \mu g_{m2}R_s R_o
     \label{eq_ee18btech11023_50}
\end{align}
\item
verify circuit by ngspice simulation.\\
for the circuit we found that 
\begin{align}
    \frac{I_o}{I_s} \equiv 1 
    \label{eq_ee18btech11023_51}
\end{align}
then 
\begin{align}
    I_s \equiv I_o
\end{align}
to simulate the circuit we are giving some values to $I_s$ and $R_s$
and to find $I_o$ we are introducing a  1ohm resistance at drain of nmos.
then , 
\begin{align}
    V_o = -RI_o
    \label{eq_ee18btech11023_52}
\end{align}
since the value of resistance R is 1ohm
\begin{align}
    I_o = -V_o
    \label{eq_ee18btech11023_53}
\end{align}
\begin{table}[]
    \centering
  	\resizebox{\columnwidth}{!}{\input{./tables/EE18BTECH11023/ee18btech11023_table3}}
    \caption{}
    \label{table:ee18btech11023_3}
\end{table}
following link provides instructions for simulation
 \begin{lstlisting}
spice/EE18BTECH11023/README
\end{lstlisting}
fig.\ref{fig:spice fig} shows the circuit implemented in spice using parameter table\ref{table:ee18btech11023_3}
\begin{figure}[!ht]
	\begin{center}
			\resizebox{\columnwidth}{!}{\input{./figs/EE18BTECH11023/ee18btech11023_ckt5}}
	\end{center}
\caption{}
\label{fig:spice fig}
\end{figure}



the following netlits code simulates the feedback current amplifier and generates sinusoidal output 
 \begin{lstlisting}
spice/EE18BTECH11023/ee18btech11023.net
\end{lstlisting}

And the following code plots the output of the feedback system generated by netlist code.\\
fig.
 \begin{lstlisting}
spice/EE18BTECH11023/ee18btech11023.py
\end{lstlisting}
final output plot is below.
\begin{figure}[!h]
    \centering
    \includegraphics[width=\columnwidth]{figs/EE18BTECH11023/ee18btech11023_output.eps}
    \caption{output from feedback Amplifier}
    \label{fig:output}
\end{figure}
here we are using amplitude 1 for input signal. \\
then the output voltage will negative of the input signal. there will be no change in amplitude in output signal.\\

since the output and input are identically equal then there will be a minor change in output
\end{enumerate}
